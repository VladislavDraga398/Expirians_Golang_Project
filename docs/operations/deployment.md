# üöÄ Deployment

> –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–µ–ø–ª–æ—è –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è OMS

**–í–µ—Ä—Å–∏—è:** v2.0 | **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-10-01 | **–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ

---

## üéØ TL;DR
- –û–∫—Ä—É–∂–µ–Ω–∏—è: Dev (Compose/Testcontainers), CI, Staging, Prod (K8s).
- Zero-downtime: Rolling Update –∫–∞–∫ –¥–µ—Ñ–æ–ª—Ç, Canary/Blue-Green –¥–ª—è —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤.
- –ú–∏–≥—Ä–∞—Ü–∏–∏: backwards-compatible, –∑–∞–ø—É—Å–∫ –¥–æ/–≤–º–µ—Å—Ç–µ —Å –≤—ã–∫–ª–∞–¥–∫–æ–π, –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞.
- –ö–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ env/Secret Manager, rate limit + mTLS –Ω–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–µ.

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è, –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–µ–∫—Ä–µ—Ç—ã.

## –û–∫—Ä—É–∂–µ–Ω–∏—è
- Dev (–ª–æ–∫–∞–ª—å–Ω–æ)
- CI (–∞–≤—Ç–æ—Ç–µ—Å—Ç—ã)
- Staging (–ø–æ—Ö–æ–∂–µ –Ω–∞ –ø—Ä–æ–¥)
- Prod

## –ü—Ä–∏–Ω—Ü–∏–ø—ã
- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã, –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ env/secret manager, –Ω–µ –≤ –∫–æ–¥–µ.
- –û–±—Ä–∞—Ç–Ω–æ—Åov–º–µ—Å—Ç–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, —Ä–µ–ª–∏–∑—ã –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è.

## –õ–æ–∫–∞–ª—å–Ω–æ (Dev)
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã: OrderService, —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î, –±—Ä–æ–∫–µ—Ä, —Å—Ç–µ–∫ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ (–æ–ø—Ü.), –º–æ–∫–∏ Inventory/Payment.
- Make-—Ç–∞—Ä–≥–µ—Ç—ã/—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –∏ —Ñ–∏–∫—Å—Ç—É—Ä.
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: Testcontainers –≤ —Ç–µ—Å—Ç–∞—Ö.

## –ü—Ä–æ–¥ (Kubernetes)
- Deployments –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è; –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ/–≤–Ω–µ—à–Ω–∏–µ –ë–î –∏ –±—Ä–æ–∫–µ—Ä.
- –ü—Ä–æ–±—ã: `readinessProbe`, `livenessProbe`.
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ: requests/limits, `HPA`.
- –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: `PodDisruptionBudget`, `NetworkPolicy`, TLS/mTLS.

## –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–µ–ø–ª–æ—è
- Rolling Update (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- Canary –¥–ª—è —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤
- Blue/Green –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

## –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- –û–±—Ä–∞—Ç–Ω–æ—Åov–º–µ—Å—Ç–∏–º—ã–µ —à–∞–≥–∏: –¥–æ–±–∞–≤–∏—Ç—å (nullable/—Å –¥–µ—Ñ–æ–ª—Ç–æ–º) ‚Üí backfill ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∫–æ–¥ ‚Üí —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ.
- –ó–∞–ø—É—Å–∫–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ/–≤–º–µ—Å—Ç–µ —Å –≤—ã–∫–ª–∞–¥–∫–æ–π; –∏–∑–±–µ–≥–∞—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö DDL.
- –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –≤–µ—Ä—Å–∏–π —Å—Ö–µ–º—ã.

## –ö–æ–Ω—Ñ–∏–≥ –∏ —Å–µ–∫—Ä–µ—Ç—ã
- –ö–æ–Ω—Ñ–∏–≥: env/config maps; —Ç–∞–π–º–∞—É—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, —Ñ–∏—á–µ—Ñ–ª–∞–≥–∏.
- –°–µ–∫—Ä–µ—Ç—ã: secret manager (Vault/Cloud). –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è; –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞.

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–æ–º
- Ingress/Gateway —Å TLS; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ service mesh.
- Rate limiting –∏ WAF –Ω–∞ –ø–µ—Ä–∏–º–µ—Ç—Ä–µ.

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —ë–º–∫–æ—Å—Ç—å
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: —Ä–∞–∑–º–µ—Ä—ã –ø–æ –ø—Ä–æ—Ñ–∏–ª—é; —Ç—é–Ω–∏–Ω–≥ –ø—É–ª–∞ –ë–î; –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–æ–≤ outbox.
- –ë—Ä–æ–∫–µ—Ä: –ø–∞—Ä—Ç–∏—Ü–∏–∏/subjects, retention, —Ä–∞–∑–º–µ—Ä—ã –±–∞—Ç—á–µ–π producer/consumer.

## BCP/DR
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î + —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
- Multi-AZ; DR-–ø–ª–∞–Ω (—Ç—ë–ø–ª—ã–π/—Ö–æ–ª–æ–¥–Ω—ã–π) –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- –†–µ–ø–ª–µ–π —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä –∏–ª–∏ —Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ outbox.

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
- –ì—Ä–∞—Ü–∏–æ–∑–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ: –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å, –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–µ, ¬´–ø—Ä–æ–ª–∏—Ç—å¬ª outbox.
- Readiness –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø–æ—Ä–æ–≥–æ–≤ –±—ç–∫–ª–æ–≥–∞.

## –•—É–∫–∏ CI/CD
- CI: lint, unit, integration (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã), contract, security scan, build.
- CD: –∞–≤—Ç–æ-–¥–µ–ø–ª–æ–π –Ω–∞ stage; prod ‚Äî —Å —Ä—É—á–Ω—ã–º –∞–ø—Ä—É–≤–æ–º –∏–ª–∏ –∫–∞–Ω–∞—Ä–µ–µ—á–Ω—ã–º–∏ –≥–µ–π—Ç–∞–º–∏.

